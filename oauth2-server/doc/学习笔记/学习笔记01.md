



BasicAuthenticationFilter
：
1、处理 包含 Basic 请求头的 HTTP request请求, 并将结果存入 SecurityContextHolder
2、Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== Basic后的字符为 username:password base64编码的字符串



 AbstractTokenGranter{
	//对 TokenRequest 进行认证 ，认证成功则返回 Oauth2AccessToken
	public OAuth2AccessToken grant(String grantType, TokenRequest tokenRequest){
		//
	}

 }



ResourceOwnerPasswordTokenGranter extends AbstractTokenGranter

重写了抽象类 AbstractTokenGranter 的 getOAuth2Authentication 方法



基础认证过滤器类 ：BasicAuthenticationFilter：
		doFilterInternal(HttpServletRequest request,HttpServletResponse response, FilterChain chain)
			{
				认证器提供者管理类：ProviderManager
					{
						//对认证器集合进行迭代选择合适的 AuthenticationProvider，认证的过程是：AuthenticationProvider 调用内部的业务类【有默认实现类，也可自定义】进行数据校验
						for (AuthenticationProvider provider : getProviders()){
							Authentication result = provider.authenticate(authentication);
						}
						认证器提供者：AuthenticationProvider
						    使用默认的实现类：DaoAuthenticationProvider 的 retrieveUser() 模板方法
						        UserDetails retrieveUser(username,authentication){
						             //使用 UserDetailsService实现类，从指定存储介质【数据库(Mysql、Oracle)、缓存(Redis)、内存(Memory)】中 加载数据进行校验。
						            loadedUser = this.getUserDetailsService().loadUserByUsername(username);
						        }
					}



			}


			postAccessToken




	//授权码模式： AccessToken 的存储方式
	//接口 AuthorizationCodeServices，抽象类 RandomValueAuthorizationCodeServices
	实现类：JdbcAuthorizationCodeServices、InMemoryAuthorizationCodeServices 【数据库 | 内存】
	@Bean
	protected AuthorizationCodeServices authorizationCodeServices() {
		return new JdbcAuthorizationCodeServices(dataSource);
	}



	@Override
    public void configure(final AuthorizationServerSecurityConfigurer security) throws Exception {
        //password模式 配置 token store, token,customizations, user approvals and grant types
    }


	@Override
    public void configure(ClientDetailsServiceConfigurer clients) {
		//Configure the ClientDetailsService
	}
